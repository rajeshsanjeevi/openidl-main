<div *ngIf="!isSpinner" class="form">
	<mat-card>
		<mat-card-content class="data-form">
			<form [formGroup]="registerForm" novalidate>
				<div class="row">
					<div class="col">
						<mat-form-field class="full-width" appearance="outline">
							<mat-label>Name</mat-label>
							<input
								matInput
								placeholder="Enter Name"
								formControlName="name"
							/>
						</mat-form-field>
					</div>
					<div class="col">
						<mat-form-field class="full-width" appearance="outline">
							<mat-label>Jurisdiction</mat-label>
							<input
								readonly
								matInput
								placeholder="Enter Jurisdiction"
								formControlName="jurisdiction"
							/>
						</mat-form-field>
					</div>
				</div>

				<div class="row">
					<div class="col">
						<mat-form-field class="full-width" appearance="outline">
							<mat-label>Description</mat-label>
							<input
								matInput
								placeholder="Enter Description"
								formControlName="description"
							/>
						</mat-form-field>
					</div>
					<div class="col">
						<mat-form-field appearance="outline" class="full-width">
							<mat-label>Line of Business</mat-label>
							<mat-select
								placeholder="Select Line of Business"
								formControlName="lineOfBusiness"
								[class.spinner]="LOBs.length === 0"
							>
								<mat-option
									[value]="lob.value"
									*ngFor="let lob of LOBs"
									>{{ lob.value }}</mat-option
								>
							</mat-select>
						</mat-form-field>
					</div>
				</div>

				<div class="row">
					<div class="col">
						<mat-form-field appearance="outline" class="full-width">
							<mat-label>Premium Dates</mat-label>
							<mat-date-range-input
								[rangePicker]="premiumDatePicker"
							>
								<input
									matStartDate
									formControlName="premiumFromDate"
									placeholder="Start date"
								/>
								<input
									matEndDate
									formControlName="premiumToDate"
									placeholder="End date"
								/>
							</mat-date-range-input>
							<mat-datepicker-toggle
								matSuffix
								[for]="premiumDatePicker"
							></mat-datepicker-toggle>
							<mat-date-range-picker
								#premiumDatePicker
							></mat-date-range-picker>

							<mat-error
								*ngIf="
									registerForm.controls.premiumFromDate.hasError(
										'matStartDateInvalid'
									)
								"
								>Invalid start date</mat-error
							>
							<mat-error
								*ngIf="
									registerForm.controls.premiumToDate.hasError(
										'matEndDateInvalid'
									)
								"
								>Invalid end date</mat-error
							>
						</mat-form-field>
					</div>
					<div class="col">
						<mat-form-field appearance="outline" class="full-width">
							<mat-label>Loss Dates</mat-label>
							<mat-date-range-input
								[rangePicker]="lossDatePicker"
							>
								<input
									matStartDate
									formControlName="lossFromDate"
									placeholder="Start date"
								/>
								<input
									matEndDate
									formControlName="lossToDate"
									placeholder="End date"
								/>
							</mat-date-range-input>
							<mat-datepicker-toggle
								matSuffix
								[for]="lossDatePicker"
							></mat-datepicker-toggle>
							<mat-date-range-picker
								#lossDatePicker
							></mat-date-range-picker>

							<mat-error
								*ngIf="
									registerForm.controls.lossFromDate.hasError(
										'matStartDateInvalid'
									)
								"
								>Invalid start date</mat-error
							>
							<mat-error
								*ngIf="
									registerForm.controls.lossToDate.hasError(
										'matEndDateInvalid'
									)
								"
								>Invalid end date</mat-error
							>
						</mat-form-field>
					</div>
				</div>

				<div class="row">
					<div class="col toggle">
						<mat-slide-toggle
							formControlName="intentToPublish"
							color="primary"
							[checked]="true"
							labelPosition="before"
						>
							Expected Public Circulation?
						</mat-slide-toggle>
					</div>
					<div class="col">
						<mat-form-field appearance="outline" class="full-width">
							<mat-label>Deadline</mat-label>
							<input
								matInput
								[matDatepickerFilter]="disableOldDates"
								[matDatepicker]="deadlinePicker"
								formControlName="deadline"
							/>
							<mat-datepicker-toggle
								matSuffix
								[for]="deadlinePicker"
							></mat-datepicker-toggle>
							<mat-datepicker #deadlinePicker></mat-datepicker>
						</mat-form-field>
					</div>
				</div>

				<div class="row">
					<div class="col">
						<mat-form-field appearance="outline" class="full-width">
							<mat-label>Purpose</mat-label>
							<textarea
								rows="7"
								matInput
								placeholder="Enter Purpose"
								formControlName="purpose"
							></textarea>
						</mat-form-field>
					</div>
				</div>

				<div class="row">
					<div class="col">
						<mat-form-field appearance="outline" class="full-width">
							<mat-label>Detailed Criteria</mat-label>
							<textarea
								rows="7"
								matInput
								placeholder="Enter Detailed Criteria"
								formControlName="detailedCriteria"
							></textarea>
						</mat-form-field>
					</div>
				</div>

				<div class="row">
					<div class="col">
						<mat-form-field appearance="outline" class="full-width">
							<mat-label>Eligibility Requirement</mat-label>
							<textarea
								rows="7"
								matInput
								placeholder="Enter Eligibility Requirement"
								formControlName="eligibilityRequirement"
							></textarea>
						</mat-form-field>
					</div>
				</div>

				<div class="row">
					<div class="col">
						<mat-slide-toggle
							class="full-width"
							formControlName="isShowParticipants"
							color="primary"
							[checked]="true"
							labelPosition="before"
						>
							Add list of participants to summary report?
						</mat-slide-toggle>
					</div>
				</div>

				<div class="row">
					<div class="col button-row">
						<button
							mat-stroked-button
							color="primary"
							(click)="saveDataCall(registerForm.value)"
						>
							<mat-icon color="primary">bookmark</mat-icon>
							Save as Draft
						</button>
						<button
							mat-flat-button
							color="primary"
							(click)="issueDataCall(registerForm.value)"
						>
							<mat-icon>note_add</mat-icon>
							Issue
						</button>
					</div>
				</div>
			</form>
		</mat-card-content>
	</mat-card>
</div>
<app-spinner *ngIf="isSpinner"></app-spinner>
